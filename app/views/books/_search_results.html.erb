<% if @query.present? && @search_results.any? %>
  <div class="space-y-4 max-h-96 overflow-y-auto">
    <% @search_results.each do |book| %>
      <div class="bg-gray-50 p-4 rounded-lg border border-gray-200 hover:bg-gray-100 transition-colors">
        <div class="flex gap-4">
          <div class="w-16 h-24 bg-gray-200 rounded shadow-sm flex-shrink-0 flex items-center justify-center">
            <span class="text-xs text-gray-500">Cover</span>
          </div>
          
          <div class="flex-grow">
            <h3 class="font-semibold text-lg text-gray-800"><%= book["title"] %></h3>
            <p class="text-sm text-gray-600 mb-1">
              By: <%= Array(book["authors"]).join(", ") %>
            </p>
            <% if book["publication_year"] %>
              <p class="text-xs text-gray-500">Published: <%= book["publication_year"] %></p>
            <% end %>
          </div>
        </div>
        
        <!-- Add Buttons -->
        <div class="mt-4 flex gap-2">
          <%= form_with url: add_from_search_books_path, method: :post, local: false, class: "flex-1" do |form| %>
            <%= form.hidden_field :title, value: book["title"] %>
            <%= form.hidden_field :authors, value: Array(book["authors"]).join(", ") %>
            <%= form.hidden_field :publication_year, value: book["publication_year"] %>
            <%= form.hidden_field :open_library_id, value: book["open_library_id"] %>
            <%= form.hidden_field :status, value: "want_to_read" %>
            <%= form.submit "Want to Read", class: "w-full px-3 py-2 bg-amber-50 hover:bg-amber-100 text-amber-700 border border-amber-200 rounded-lg text-sm font-medium" %>
          <% end %>
          <%= form_with url: add_from_search_books_path, method: :post, local: false, class: "flex-1" do |form| %>
            <%= form.hidden_field :title, value: book["title"] %>
            <%= form.hidden_field :authors, value: Array(book["authors"]).join(", ") %>
            <%= form.hidden_field :publication_year, value: book["publication_year"] %>
            <%= form.hidden_field :open_library_id, value: book["open_library_id"] %>
            <%= form.hidden_field :status, value: "currently_reading" %>
            <%= form.submit "Reading", class: "w-full px-3 py-2 bg-teal-50 hover:bg-teal-100 text-teal-700 border border-teal-200 rounded-lg text-sm font-medium" %>
          <% end %>
          <%= form_with url: add_from_search_books_path, method: :post, local: false, class: "flex-1" do |form| %>
            <%= form.hidden_field :title, value: book["title"] %>
            <%= form.hidden_field :authors, value: Array(book["authors"]).join(", ") %>
            <%= form.hidden_field :publication_year, value: book["publication_year"] %>
            <%= form.hidden_field :open_library_id, value: book["open_library_id"] %>
            <%= form.hidden_field :status, value: "read" %>
            <%= form.submit "Read", class: "w-full px-3 py-2 bg-indigo-50 hover:bg-indigo-100 text-indigo-700 border border-indigo-200 rounded-lg text-sm font-medium" %>
          <% end %>
        </div>
      </div>
    <% end %>
  </div>
<% elsif @query.present? %>
  <p class="text-gray-500 text-center py-4">No books found for "<%= @query %>". Try a different search term.</p>
<% else %>
  <p class="text-gray-500 text-center py-4">Search for books to add to your shelves.</p>
<% end %> 